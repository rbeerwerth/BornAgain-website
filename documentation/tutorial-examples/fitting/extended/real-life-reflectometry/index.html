<!DOCTYPE html>
<html lang="en-us">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">
<title>Reflectometry: Real life fitting -- BornAgain</title>


<link href="https://www.bornagainproject.org/css/bootstrap.min.css" rel="stylesheet">

<link href="https://www.bornagainproject.org/css/theme.css" rel="stylesheet">

<link href="https://www.bornagainproject.org/css/mathjax-style.css" rel="stylesheet">

<link href="https://www.bornagainproject.org/css/vs.css" rel="stylesheet">

<link href="https://www.bornagainproject.org/css/baguetteBox.min.css" rel="stylesheet">
<link href="https://www.bornagainproject.org/css/gallery-grid.css" rel="stylesheet">

<link href="https://www.bornagainproject.org/assets/css/bornagain.css" rel="stylesheet">

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/css?family=Libre+Baskerville" rel='stylesheet'  type='text/css'> 
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
  });
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });

  MathJax.Hub.Config({
  
  TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
    var TEX = MathJax.InputJax.TeX;
    var PREFILTER = TEX.prefilterMath;
    TEX.Augment({
      prefilterMath: function (math,displaymode,script) {
        if (!displaymode) {math = "\\small{"+math+"}"}
        return PREFILTER.call(TEX,math,displaymode,script);
      }
    });
  });
  </script>

</head>


  <body>
    <header class="hero overlay"><div class="container">
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark bg-primary">
    <a class="navbar-brand" href="https://www.bornagainproject.org">
        <img src="https://www.bornagainproject.org/assets/img/bornagain-logo.png" class="d-inline-block align-top" alt="">
        BornAgain
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
      <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
        
        
          <li class="nav-item "> <a class="nav-link" href="https://www.bornagainproject.org/">Home</a></li>
        
          <li class="nav-item "> <a class="nav-link" href="https://www.bornagainproject.org/gallery/">Gallery</a></li>
        
          <li class="nav-item "> <a class="nav-link" href="https://www.bornagainproject.org/download/">Download</a></li>
        
          <li class="nav-item "> <a class="nav-link" href="https://www.bornagainproject.org/post/">News</a></li>
        
          <li class="nav-item active"> <a class="nav-link" href="https://www.bornagainproject.org/documentation/">Documentation</a></li>
        
          <li class="nav-item "> <a class="nav-link" href="https://www.bornagainproject.org/contact/">Contact</a></li>
        
          <li class="nav-item "> <a class="nav-link" href="https://www.bornagainproject.org/about/">About</a></li>
          
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/scgmlz/BornAgain" target="_blank" rel="noopener" aria-label="GitHub">
              <span class="fa fa-github fa-2x"></span>
            </a>
          </li>        
        
      </ul>
    </div>
  </nav>
</div>
  
      <div class="container">
        <div class="row">
          <div class="col-lg-12"> <br></div>
        </div>
      </div>
    </header>

    
  <div class="breadcrumb">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">











 <a href='https://www.bornagainproject.org/'>Home</a> > <a href='https://www.bornagainproject.org/documentation/'>Documentation</a> > <a href='https://www.bornagainproject.org/documentation/tutorial-examples/'>Tutorial examples</a> > <a href='https://www.bornagainproject.org/documentation/tutorial-examples/fitting/'>Fitting</a> > <a href='https://www.bornagainproject.org/documentation/tutorial-examples/fitting/extended/'>Extended examples</a> > Reflectometry: Real life fitting

 

 

 

 

 

   
        </div>
      </div>
    </div>
</div>





    





<div class="container">
  <div class="row">
    <div class="col-md-8">
      
      
  
  

<h2 id="reflectometry-real-life-fitting">Reflectometry: Real life fitting</h2>

<p>In this example we are demonstrating how to perform in BornAgain a real-life reflectometry fitting job. To this fix ideas, we focus on fitting data from an X-ray reflectometer. The sample is composed of a thin silver nano-particle layer on top of a SiO2 layer and a silicon substrate. The nano-particle layer has negligible density and does not considerably affect the observed reflectometry signal.</p>

<p>The fitting proceeds as follows:</p>

<p>In a first stage, the whole range of experimental data is fitted and the data related to the instrument is fixed. Later on, only the right-hand part of the experimental data is fitted (i.e. the part of the reflectometry curve associated with bigger incident angles) and, finally, only the sample parameters are fitted. Only these last set of parameters affect the shape of the reflectometry curve at bigger incident angles.</p>

<p>A script performing this job is shown below in which the following parameters are fitted:</p>

<ol>
<li>Beam intensity</li>
<li>Footprint correction factor</li>
<li>Beam angular divergence</li>
<li>Material concentration in the SiO2 layer</li>
<li>Thickness of SiO2 layer</li>
<li>Sample roughness</li>
</ol>

<p>Be patient, since it takes some time to run.</p>


<figure class="center">
    
        <img src="Figure.png" alt="Figure obtained after running the script below" />
    
    
    <figcaption>
        <p>
        Figure obtained after running the script below
        
            
        
        </p> 
    </figcaption>
    
</figure>



  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="s2">&#34;&#34;&#34;
</span><span class="s2">Real life example:
</span><span class="s2">Fitting data from an X-ray reflectometer
</span><span class="s2">
</span><span class="s2">The sample is composed of a thin
</span><span class="s2">silver nano-particle layer on a silicon
</span><span class="s2">substrate. The substrate is covered with
</span><span class="s2">SiO2 layer. The nano-particle layer has negligible density
</span><span class="s2">and does not considerably affect
</span><span class="s2">the observed reflectometry picture.
</span><span class="s2">
</span><span class="s2">The following parameters of the experiment
</span><span class="s2">are fitted:
</span><span class="s2">1. beam intensity
</span><span class="s2">2. footprint correction factor
</span><span class="s2">3. beam angular divergence
</span><span class="s2">4. Material concentration in the SiO2 layer
</span><span class="s2">5. Thickness of SiO2 layer
</span><span class="s2">6. Sample roughness
</span><span class="s2">
</span><span class="s2">Fitting is done in two steps:
</span><span class="s2">First the whole range of experimental data is fitted,
</span><span class="s2">then the data related to the instrument is fixed and
</span><span class="s2">on the second step only the right-hand part of
</span><span class="s2">experimental data (i.e. the part of the reflectometry curve
</span><span class="s2">associated with bigger incident angles)
</span><span class="s2">is concerned for fitting. At the second
</span><span class="s2">stage only the sample parameters are fitted,
</span><span class="s2">since only they affect the shape of the reflectometry
</span><span class="s2">curve at bigger incident angles.
</span><span class="s2">&#34;&#34;&#34;</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">path</span>
<span class="kn">import</span> <span class="nn">bornagain</span> <span class="kn">as</span> <span class="nn">ba</span>
<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">differential_evolution</span>


<span class="k">def</span> <span class="nf">get_real_data</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&#34;mg6a_Merged.txt.gz&#34;</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Loads real data files and merges them once.
</span><span class="s2">    Returns a Nx3 array (N - the number of experimental data entries)
</span><span class="s2">    with first column being coordinates,
</span><span class="s2">    second one being values,
</span><span class="s2">    and the third one being weights to restore intensity values from experiment
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">get_real_data</span><span class="p">,</span> <span class="s2">&#34;data&#34;</span><span class="p">):</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span> <span class="n">filename</span><span class="p">)</span>
        <span class="n">real_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># translating axis values from double incident angle (degrees)</span>
        <span class="c1"># to incident angle (radians)</span>
        <span class="n">real_data</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">360</span>
        <span class="n">get_real_data</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">real_data</span>
    <span class="k">return</span> <span class="n">get_real_data</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">get_real_data_axis</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Get axis coordinates of the experimental data
</span><span class="s2">    :param start: first bin to extract
</span><span class="s2">    :param end: last bin to extract
</span><span class="s2">    :return: 1D array with axis coordinates
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="k">return</span> <span class="n">get_real_data</span><span class="p">()[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">get_real_data_values</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Get experimental data values as a 1D array
</span><span class="s2">    :param start: first bin to extract
</span><span class="s2">    :param end: last bin to extract
</span><span class="s2">    :return: 1D array with experimental data values
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="k">return</span> <span class="n">get_real_data</span><span class="p">()[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">get_weights</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Get weights to restore genuine intensity of experimental instrument
</span><span class="s2">    :param start: first bin to extract
</span><span class="s2">    :param end: last bin to extract
</span><span class="s2">    :return: 1D array with weights to restore beam intensity
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="k">return</span> <span class="n">get_real_data</span><span class="p">()[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">create_simulation</span><span class="p">(</span><span class="n">arg_dict</span><span class="p">,</span> <span class="n">bin_start</span><span class="p">,</span> <span class="n">bin_end</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Creates and returns specular simulation
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">wavelength</span> <span class="o">=</span> <span class="mf">1.54</span> <span class="o">*</span> <span class="n">ba</span><span class="o">.</span><span class="n">angstrom</span>
    <span class="n">alpha_distr</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">RangedDistributionGaussian</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">footprint</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">FootprintFactorGaussian</span><span class="p">(</span><span class="n">arg_dict</span><span class="p">[</span><span class="s2">&#34;footprint_factor&#34;</span><span class="p">])</span>

    <span class="n">scan</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">AngularSpecScan</span><span class="p">(</span><span class="n">wavelength</span><span class="p">,</span>
                              <span class="n">get_real_data_axis</span><span class="p">(</span><span class="n">bin_start</span><span class="p">,</span> <span class="n">bin_end</span><span class="p">))</span>
    <span class="n">scan</span><span class="o">.</span><span class="n">setAbsoluteAngularResolution</span><span class="p">(</span><span class="n">alpha_distr</span><span class="p">,</span> <span class="n">arg_dict</span><span class="p">[</span><span class="s2">&#34;divergence&#34;</span><span class="p">])</span>
    <span class="n">scan</span><span class="o">.</span><span class="n">setFootprintFactor</span><span class="p">(</span><span class="n">footprint</span><span class="p">)</span>

    <span class="n">simulation</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">SpecularSimulation</span><span class="p">()</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">setScan</span><span class="p">(</span><span class="n">scan</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">setBeamIntensity</span><span class="p">(</span><span class="n">arg_dict</span><span class="p">[</span><span class="s2">&#34;intensity&#34;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">simulation</span>


<span class="k">def</span> <span class="nf">buildSample</span><span class="p">(</span><span class="n">arg_dict</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Creates sample and returns it
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="c1"># defining materials</span>
    <span class="n">m_air</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">HomogeneousMaterial</span><span class="p">(</span><span class="s2">&#34;Air&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="n">m_si_o2</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">HomogeneousMaterial</span><span class="p">(</span><span class="s2">&#34;SiO2&#34;</span><span class="p">,</span>
        <span class="mf">8.57040868e-06</span> <span class="o">*</span> <span class="n">arg_dict</span><span class="p">[</span><span class="s2">&#34;concentration&#34;</span><span class="p">],</span>
        <span class="mf">1.11016654e-07</span> <span class="o">*</span> <span class="n">arg_dict</span><span class="p">[</span><span class="s2">&#34;concentration&#34;</span><span class="p">])</span>
    <span class="n">m_si</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">HomogeneousMaterial</span><span class="p">(</span><span class="s2">&#34;Si&#34;</span><span class="p">,</span> <span class="mf">7.57211137e-06</span><span class="p">,</span> <span class="mf">1.72728178e-07</span><span class="p">)</span>

    <span class="c1"># roughness</span>
    <span class="n">r_si</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">LayerRoughness</span><span class="p">(</span><span class="n">arg_dict</span><span class="p">[</span><span class="s2">&#34;roughness&#34;</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1"># layers</span>
    <span class="n">air_layer</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="n">m_air</span><span class="p">)</span>
    <span class="n">oxide_layer</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="n">m_si_o2</span><span class="p">,</span> <span class="n">arg_dict</span><span class="p">[</span><span class="s2">&#34;thickness&#34;</span><span class="p">])</span>
    <span class="n">substrate_layer</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="n">m_si</span><span class="p">)</span>

    <span class="c1"># assembling multilayer</span>
    <span class="n">multi_layer</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">MultiLayer</span><span class="p">()</span>
    <span class="n">multi_layer</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">air_layer</span><span class="p">)</span>
    <span class="n">multi_layer</span><span class="o">.</span><span class="n">addLayerWithTopRoughness</span><span class="p">(</span><span class="n">oxide_layer</span><span class="p">,</span> <span class="n">r_si</span><span class="p">)</span>
    <span class="n">multi_layer</span><span class="o">.</span><span class="n">addLayerWithTopRoughness</span><span class="p">(</span><span class="n">substrate_layer</span><span class="p">,</span> <span class="n">r_si</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">multi_layer</span>


<span class="k">def</span> <span class="nf">run_simulation</span><span class="p">(</span><span class="n">arg_dict</span><span class="p">,</span> <span class="n">bin_start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bin_end</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Runs simulation and returns its result
</span><span class="s2">    &#34;&#34;&#34;</span>

    <span class="n">simulation</span> <span class="o">=</span> <span class="n">create_simulation</span><span class="p">(</span><span class="n">arg_dict</span><span class="p">,</span> <span class="n">bin_start</span><span class="p">,</span> <span class="n">bin_end</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">setSample</span><span class="p">(</span><span class="n">buildSample</span><span class="p">(</span><span class="n">arg_dict</span><span class="p">))</span>

    <span class="n">simulation</span><span class="o">.</span><span class="n">runSimulation</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">simulation</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">chi_2</span><span class="p">(</span><span class="n">real_data</span><span class="p">,</span> <span class="n">sim_data</span><span class="p">,</span> <span class="n">weights</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Computes chi_2 metrics and returns its value
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">sim_data_upsc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">weights</span><span class="p">,</span> <span class="n">sim_data</span><span class="p">)</span>
    <span class="n">sim_data_upsc</span><span class="p">[</span><span class="n">sim_data_upsc</span> <span class="ow">is</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1e-30</span>
    <span class="n">real_data_upsc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">weights</span><span class="p">,</span> <span class="n">real_data</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">real_data_upsc</span> <span class="o">-</span> <span class="n">sim_data_upsc</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="nb">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">diff</span><span class="p">,</span><span class="n">diff</span><span class="p">),</span> <span class="n">sim_data_upsc</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">create_par_dict</span><span class="p">(</span><span class="o">*</span><span class="n">arg</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Creates a dictionary with parameter names and values
</span><span class="s2">    and returns it
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;intensity&#39;</span><span class="p">:</span> <span class="n">arg</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="s1">&#39;footprint_factor&#39;</span><span class="p">:</span> <span class="n">arg</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="s1">&#39;divergence&#39;</span><span class="p">:</span><span class="n">arg</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="s1">&#39;concentration&#39;</span><span class="p">:</span> <span class="n">arg</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
            <span class="s1">&#39;thickness&#39;</span><span class="p">:</span> <span class="n">arg</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
            <span class="s1">&#39;roughness&#39;</span><span class="p">:</span> <span class="n">arg</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
            <span class="p">}</span>


<span class="k">def</span> <span class="nf">objective_primary</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Objective function for preliminary stage of optimization
</span><span class="s2">    &#34;&#34;&#34;</span>

    <span class="n">bin_start</span> <span class="o">=</span> <span class="mi">15</span>  <span class="c1"># first bin in the experimental data to calculate</span>
    <span class="n">bin_end</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>  <span class="c1"># last bin in the experimental data to calculate</span>
    <span class="n">arg_dict</span> <span class="o">=</span> <span class="n">create_par_dict</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>

    <span class="n">sim_result</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">arg_dict</span><span class="p">,</span> <span class="n">bin_start</span><span class="p">,</span> <span class="n">bin_end</span><span class="p">)</span>
    <span class="n">sim_data</span> <span class="o">=</span> <span class="n">sim_result</span><span class="o">.</span><span class="n">array</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">chi_2</span><span class="p">(</span><span class="n">get_real_data_values</span><span class="p">(</span><span class="n">bin_start</span><span class="p">,</span> <span class="n">bin_end</span><span class="p">),</span>
                 <span class="n">sim_data</span><span class="p">,</span> <span class="n">get_weights</span><span class="p">(</span><span class="n">bin_start</span><span class="p">,</span> <span class="n">bin_end</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">objective_fine</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">intensity</span><span class="p">,</span> <span class="n">footprint_factor</span><span class="p">,</span> <span class="n">divergence</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Objective function for tuning the right-hand side of experimental data
</span><span class="s2">    &#34;&#34;&#34;</span>

    <span class="n">bin_start</span> <span class="o">=</span> <span class="mi">404</span>  <span class="c1"># first bin in the experimental data to calculate</span>
    <span class="n">bin_end</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>  <span class="c1"># last bin in the experimental data to calculate</span>
    <span class="n">arg_dict</span> <span class="o">=</span> <span class="n">create_par_dict</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="n">footprint_factor</span><span class="p">,</span> <span class="n">divergence</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>

    <span class="n">sim_result</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">arg_dict</span><span class="p">,</span> <span class="n">bin_start</span><span class="p">,</span> <span class="n">bin_end</span><span class="p">)</span>
    <span class="n">sim_data</span> <span class="o">=</span> <span class="n">sim_result</span><span class="o">.</span><span class="n">array</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">chi_2</span><span class="p">(</span><span class="n">get_real_data_values</span><span class="p">(</span><span class="n">bin_start</span><span class="p">,</span> <span class="n">bin_end</span><span class="p">),</span>
                 <span class="n">sim_data</span><span class="p">,</span> <span class="n">get_weights</span><span class="p">(</span><span class="n">bin_start</span><span class="p">,</span> <span class="n">bin_end</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">run_fitting</span><span class="p">():</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Runs fitting and returns its result
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="c1"># running preliminary optimization on the total range of experimental data.</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">1e6</span><span class="p">,</span> <span class="mf">1e8</span><span class="p">),</span>   <span class="c1"># beam intensity</span>
              <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>   <span class="c1"># beam-to-sample width ratio</span>
              <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.08</span> <span class="o">*</span> <span class="n">ba</span><span class="o">.</span><span class="n">deg</span><span class="p">),</span>  <span class="c1"># beam_divergence</span>
              <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>  <span class="c1"># oxide_concentration</span>
              <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">),</span>  <span class="c1"># oxide_thickness</span>
              <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">)]</span>    <span class="c1"># roughness</span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Start preliminary fitting of experimental data:</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">)</span>

    <span class="n">preliminary_result</span> <span class="o">=</span> <span class="n">differential_evolution</span><span class="p">(</span><span class="n">objective_primary</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span>
                                                <span class="n">maxiter</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">popsize</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span>
                                                <span class="n">mutation</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span>
                                                <span class="n">disp</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">tol</span><span class="o">=</span><span class="mf">1e-5</span><span class="p">)</span>

    <span class="n">bounds</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>  <span class="c1"># oxide_concentration</span>
              <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">),</span>  <span class="c1"># oxide_thickness</span>
              <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">)]</span>    <span class="c1"># roughness</span>

    <span class="n">fixed_args</span> <span class="o">=</span> <span class="p">(</span><span class="n">preliminary_result</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>  <span class="c1"># beam intensity</span>
                  <span class="n">preliminary_result</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>  <span class="c1"># beam-to-sample width ratio</span>
                  <span class="n">preliminary_result</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># beam divergence</span>
                  <span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">Start fitting big incident angle part of experimental data:</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">)</span>

    <span class="n">fine_tuning_result</span> <span class="o">=</span> <span class="n">differential_evolution</span><span class="p">(</span><span class="n">objective_fine</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span>
                                                <span class="n">fixed_args</span><span class="p">,</span> <span class="n">maxiter</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
                                                <span class="n">popsize</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">mutation</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span>
                                                <span class="n">disp</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">tol</span><span class="o">=</span><span class="mf">1e-5</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">create_par_dict</span><span class="p">(</span><span class="o">*</span><span class="n">fixed_args</span><span class="p">,</span> <span class="o">*</span><span class="n">fine_tuning_result</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">Fitting result:&#34;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>


<span class="k">def</span> <span class="nf">plot_result</span><span class="p">(</span><span class="n">sim_result</span><span class="p">,</span> <span class="n">ref_result</span><span class="p">,</span> <span class="n">bin_start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bin_end</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Plots the graphs of obtained simulation data
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">sim_data</span> <span class="o">=</span> <span class="n">sim_result</span><span class="o">.</span><span class="n">array</span><span class="p">()</span>
    <span class="n">ref_data</span> <span class="o">=</span> <span class="n">ref_result</span><span class="o">.</span><span class="n">array</span><span class="p">()</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">semilogy</span><span class="p">(</span><span class="n">get_real_data_axis</span><span class="p">(</span><span class="n">bin_start</span><span class="p">,</span> <span class="n">bin_end</span><span class="p">)</span> <span class="o">*</span> <span class="mi">180</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span>
                 <span class="n">get_real_data_values</span><span class="p">(</span><span class="n">bin_start</span><span class="p">,</span> <span class="n">bin_end</span><span class="p">),</span>
                 <span class="n">sim_result</span><span class="o">.</span><span class="n">axis</span><span class="p">(),</span> <span class="n">sim_data</span><span class="p">,</span>
                 <span class="n">ref_result</span><span class="o">.</span><span class="n">axis</span><span class="p">(),</span> <span class="n">ref_data</span><span class="p">)</span>

    <span class="n">xlabel</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">get_axes_labels</span><span class="p">(</span><span class="n">sim_result</span><span class="p">,</span> <span class="n">ba</span><span class="o">.</span><span class="n">AxesUnits</span><span class="o">.</span><span class="n">DEFAULT</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">ylabel</span> <span class="o">=</span> <span class="s2">&#34;Intensity&#34;</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Experimental data&#39;</span><span class="p">,</span> <span class="s1">&#39;Simulation&#39;</span><span class="p">,</span> <span class="s1">&#39;Reference&#39;</span><span class="p">],</span>
               <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">fit_data</span> <span class="o">=</span> <span class="n">run_fitting</span><span class="p">()</span>
    <span class="n">ref_data</span> <span class="o">=</span> <span class="n">create_par_dict</span><span class="p">(</span><span class="mf">3.78271438e+06</span><span class="p">,</span>  <span class="c1"># beam intensity</span>
                               <span class="mf">9.58009763e-04</span><span class="p">,</span>  <span class="c1"># beam-to-sample width ratio</span>
                               <span class="mf">2.30471294e-04</span><span class="p">,</span>  <span class="c1"># beam angular divergence</span>
                               <span class="mf">0.58721753</span><span class="p">,</span>  <span class="c1"># oxide concentration</span>
                               <span class="mf">1.25559347</span><span class="p">,</span>  <span class="c1"># oxide thickness</span>
                               <span class="mf">0.19281863</span><span class="p">)</span>  <span class="c1"># roughness</span>
    <span class="n">plot_result</span><span class="p">(</span><span class="n">run_simulation</span><span class="p">(</span><span class="n">fit_data</span><span class="p">),</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">ref_data</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div>

  
  
  

  
  

<a class="linktofile" href="https://www.bornagainproject.org/files/python/fitting/ex03_ExtendedExamples/specular/RealLifeReflectometryFitting.py"/>
    RealLifeReflectometryFitting.py
</a>



      <div class="container next-prev">
<nav>
  <ul class="pagination pagination-sm justify-content-end"><li class="page-item ">
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/extended/external-minimizer-with-plotting/" class="page-link"><i class="fa fa-chevron-left fa-1g "></i>
      </a>
    </li>  

    <li class="page-item ">
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/miscellaneous/" class="page-link"><i class="fa fa-chevron-right fa-1g "></i>
      </a>
    </li></ul>
</nav>
</div>

    </div>
    <div class="col-md-4">
    <ul class="doctree">
    <li class="dd-item parent">
          <i class="fa liOpened li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/"><span>Documentation</span></a>
        <ul>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/introduction/"><span>Introduction</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/introduction/functionality/"><span>Functionality overview</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/introduction/architecture/"><span>Architectural overview</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/"><span>Getting started</span></a>
        <ul>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/installation/"><span>Installation instructions</span></a>
        <ul>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/installation/windows/"><span>Installation on Windows</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/installation/windows/python-anaconda/"><span>Install Python with the Anaconda installer (recommended)</span> </a>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/installation/windows/python-original/"><span>Manual Python installation (advanced)</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/installation/windows/python-original/python-vscode/"><span>VSCode editor</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/installation/windows/python-original/python-pycharm/"><span>PyCharm IDE</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/installation/windows/python-troubleshooting/"><span>Python troubleshooting</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/installation/macos/"><span>Installation on MacOS</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/installation/macos/advanced-tips/"><span>Advanced tips</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/installation/linux-short/"><span>Installation on Linux (short version)</span> </a>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/installation/linux-detailed/"><span>Installation on Linux (detailed version)</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/installation/linux-detailed/third-party/"><span>Install third-party software</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/installation/linux-detailed/get-source/"><span>Get the source</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/installation/linux-detailed/build-and-install/"><span>Build and install BornAgain</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/installation/linux-detailed/first-simulation/"><span>Run a first simulation</span> </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-started/quick-start/"><span>Quick Start</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/running-gui/"><span>Using the Graphical User Interface</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/running-gui/gui-overview/"><span>BornAgain GUI overview</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/running-gui/gui-fitting/"><span>Fitting in the GUI</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/"><span>Working with Python scripts</span></a>
        <ul>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/basic-simulation-tutorial/"><span>Basic simulation tutorial</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/basic-simulation-tutorial/gisas/"><span>GISAS</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/basic-simulation-tutorial/reflectometry/"><span>Reflectometry</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/basic-simulation-tutorial/depth-probe/"><span>Depth-probe</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/material-types/"><span>Material types</span> </a>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/detector-types/"><span>Detector types</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/detector-types/spherical-detector/"><span>Spherical detector</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/detector-types/rectangular-detector/"><span>Rectangular detector</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/accessing-simulation-results/"><span>Accessing simulation results</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/particle-positioning/"><span>Particle positioning</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/particle-distribution/"><span>Particle distribution</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/particle-rotation/"><span>Particle rotation</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/particle-composition/"><span>Particle composition</span> </a>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/interference/"><span>Interference functions</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/interference/lattice1d/"><span>1D lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/interference/lattice2d/"><span>2D lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/interference/para_radial/"><span>Radial paracrystal</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/interference/para2d/"><span>2D paracrystal</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/3d-nanoparticle-arrangements/"><span>3D Nanoparticle Arrangements</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/magnetic-particles/"><span>Magnetic particles</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/python-api/"><span>Python API</span> </a>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/fitting/"><span>Fitting</span></a>
        <ul>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/fitting/introduction/"><span>Introduction</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/fitting/introduction/basic-concept/"><span>Basic concept</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/fitting/introduction/fitting-in-gisas/"><span>Fitting in GISAS</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/fitting/introduction/minimal-fitting-example/"><span>Minimal fitting example</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/fitting/basic-fitting-tutorial/"><span>Basic fitting tutorial</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/fitting/importing-experimental-data/"><span>Importing experimental data</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/fitting/instrument-description/"><span>Experiment description</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/working-with-python/fitting/minimizers/"><span>Minimizer settings</span> </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="dd-item parent">
          <i class="fa liOpened li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/"><span>Tutorial examples</span></a>
        <ul>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/embedded-particles/"><span>Embedded particles</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/embedded-particles/cylinders-ba/"><span>Cylinders in Born Approximation</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/embedded-particles/cylinders-dwba/"><span>Cylinders in Distorted Wave Born Approximation</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/embedded-particles/size-distribution/"><span>Cylinders with size distribution</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/embedded-particles/size-distribution2/"><span>Two types of cylinders with size distribution</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/embedded-particles/rotated-pyramids/"><span>Rotated Pyramids</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/embedded-particles/cylinders-and-prisms/"><span>Cylinders and Prisms</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/embedded-particles/all-formfactors/"><span>All available form factors</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/layered-structures/"><span>Layered structures</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/layered-structures/buried-particles/"><span>Buried particles</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/layered-structures/correlated-roughness/"><span>Correlated roughness</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/"><span>Interference functions</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/interference-1d-lattice/"><span>1D lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/interference-2d-square-lattice/"><span>2D square lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/interference-2d-rotated-square-lattice/"><span>2D rotated square lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/interference-2d-square-finite-lattice/"><span>2D square finite lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/interference-2d-lattice-sum-of-rotated/"><span>2D sum of rotated square lattices</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/interference-2d-centered-square-lattice/"><span>2D centered square lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/spheres-at-hex-lattice/"><span>Spheres on Hexagonal Lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/cosine-ripples-at-rect-lattice/"><span>Cosine ripples in a lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/triangular-ripples/"><span>Triangular ripples in a lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/interference-2d-paracrystal/"><span>2D Paracrystal</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/interference-1d-radial-paracrystal/"><span>1D radial paracrystal</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/rectangular-grating/"><span>Rectangular grating</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/approximation-da/"><span>Size-distribution model: decoupling approximation</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/approximation-lma/"><span>Size-distribution model: local monodisperse approximation</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/interference-functions/approximation-ssca/"><span>Size-distribution model: size-spacing coupling approximation</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/complex-shapes/"><span>Complex shapes</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/complex-shapes/core-shell-nanoparticles/"><span>Core shell nanoparticles</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/complex-shapes/bi-material-cylinders/"><span>Cylinders with two materials</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/complex-shapes/particles-crossing-interface/"><span>Particles crossing an interface</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/complex-shapes/hexagonal-lattice-with-basis/"><span>Hexagonal lattices with basis</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/complex-shapes/meso-crystal/"><span>Mesocrystal</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/complex-shapes/large-particles-formfactor/"><span>Large particle formfactor</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/complex-shapes/custom-formfactor/"><span>Custom formfactor</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/beam-and-detector/"><span>Beam and detector</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/beam-and-detector/beam-divergence/"><span>Beam divergence</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/beam-and-detector/constant-background/"><span>Adding constant background</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/beam-and-detector/detector-resolution/"><span>Detector resolution function</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/beam-and-detector/offspecular-simulation/"><span>Off-Specular</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/beam-and-detector/resonator-offspec-setup/"><span>Off-Specular - Resonators</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/beam-and-detector/rectangular-detector/"><span>Rectangular detector</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/reflectometry/"><span>Reflectometry</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/reflectometry/specular-simulation-with-roughness/"><span>Simulation with a rough sample</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/reflectometry/footprint-correction/"><span>Footprint correction</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/reflectometry/beam-angular-divergence/"><span>Beam Angular Spread</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/reflectometry/beam-full-divergence/"><span>Beam Wavelength Spread</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/reflectometry/material-profile/"><span>Material profile</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/reflectometry/material-profile-with-particles/"><span>Material profile with particles</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/reflectometry/time-of-flight/"><span>Time of Flight Reflectometry</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/reflectometry/tofr-with-resolution/"><span>ToF - Resolution effects</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item parent">
          <i class="fa liOpened li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/"><span>Fitting</span></a>
        <ul>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/basic/"><span>Basic examples</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/basic/minimal-fit-example/"><span>Minimal fit example</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/basic/basic-fit-tutorial/"><span>Basic fit example</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/basic/minimizer-settings/"><span>Minimizer settings</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/basic/consecutive-fitting/"><span>Consecutive fitting</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/advanced/"><span>Advanced examples</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/advanced/fit-with-masks/"><span>Fitting with masks</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/advanced/fit-along-slices/"><span>Fitting along slices</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/advanced/find-background/"><span>Find background</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/advanced/multiple-datasets/"><span>Simultaneous fit of two datasets</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item parent">
          <i class="fa liOpened li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/extended/"><span>Extended examples</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/extended/fit-specular-data/"><span>Fitting reflectometry data</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/extended/custom-objective-function/"><span>Custom objective function</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/extended/experiment-at-galaxi/"><span>Experiment at GALAXI</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/extended/fit-with-uncertainties/"><span>Considering uncertainties</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/extended/external-minimizer/"><span>External minimizer</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/extended/external-minimizer-with-plotting/"><span>External minimizer: plotting</span> </a>
    </li>
    <li class="dd-item active">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/fitting/extended/real-life-reflectometry/"><span>Reflectometry: Real life fitting</span> </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/miscellaneous/"><span>Miscellaneous</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/miscellaneous/accessing-simulation-results/"><span>Accessing simulation results</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/miscellaneous/find-peaks/"><span>Finding Intensity Peaks</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/miscellaneous/depth-probe/"><span>Depth-probe</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/miscellaneous/axes-in-different-units/"><span>Plotting with axes in different units</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/miscellaneous/sample-parameters/"><span>Working with sample parameters</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/miscellaneous/polarized-sans/"><span>Polarized SANS</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/miscellaneous/boxes-with-specular-peak/"><span>Boxes With Specular Peak</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/miscellaneous/cylinders-in-average-layer/"><span>Cylinders in Averaged Layer</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/miscellaneous/half-spheres-in-average-top-layer/"><span>Hemispheres in Averaged Layer</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/tutorial-examples/miscellaneous/magnetic-particles/"><span>Magnetic particles</span> </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-help/"><span>Getting help</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-help/troubleshooting/"><span>Troubleshooting</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/getting-help/frequently-asked-questions/"><span>Frequently asked questions</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/developers-corner/"><span>Developer&#39;s corner</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/developers-corner/whats-new-indocs/"><span>What&#39;s new in the documentation</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://www.bornagainproject.org/documentation/developers-corner/contribute-to-documentation/"><span>Contribute to documentation</span> </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>

    </div>
  </div>
</div>    <hr>
    
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                  <ul class="list-inline text-center">
                    
                      <li class="list-inline-item social">
                        <a href="mailto:contact@bornagainproject.org">
                          <span class="fa-stack fa-lg">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-envelope-o fa-stack-1x fa-inverse"></i>
                          </span>
                        </a>
                      </li>
                    
                    
                    <li class="list-inline-item social">
                      <a href="https://github.com/scgmlz/BornAgain">
                        <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                        </span>
                      </a>
                    </li>
                    
                  </ul>
                  <p class="copyright text-muted"></p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://www.bornagainproject.org/js/bootstrap.min.js"></script>
    
    <script src="https://www.bornagainproject.org/js/baguetteBox.min.js"></script>
    <script>
      baguetteBox.run('.galleryscg');
    </script>    
    
    <script src="https://www.bornagainproject.org/js/theme.js"></script>
    <script src="https://www.bornagainproject.org/assets/js/bornagain.js"></script>
    
    
<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-120020802-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</body>
</html>


